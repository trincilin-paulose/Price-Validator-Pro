<nav class="bg-white shadow" style="position: relative;">
  <div class="max-w-7xl mx-auto px-4">
    <div style="display:flex; align-items:center; justify-content:space-between; height:64px;">

      <!-- Logo -->
      <div style="font-size:24px; font-weight:bold;">
        <a href="{% url 'home' %}" style="color:#111827; text-decoration:none;">
          DemoStore
        </a>
      </div>

      <!-- Categories Button -->
      <div
        onmouseover="document.getElementById('mega-menu').style.display='block'"
        onmouseout="document.getElementById('mega-menu').style.display='none'"
        style="cursor:pointer; font-weight:600;"
      >
        Categories
      </div>

      <!-- Right Menu -->
      <div>
        <a href="#" style="margin-right:16px;">Login</a>
        <a href="{% url 'cart:detail' %}">Cart</a>
      </div>
    </div>
  </div>

  <!-- ✅ MEGA MENU -->
  <div
    id="mega-menu"
    onmouseover="this.style.display='block'"
    onmouseout="this.style.display='none'"
    style="
      display:none;
      position:absolute;
      top:64px;
      left:50%;
      transform:translateX(-50%);
      width:90%;
      max-width:1200px;
      background:#ffffff;
      box-shadow:0 12px 30px rgba(0,0,0,0.15);
      padding:30px 40px;
      z-index:9999;
    "
  >

    <!-- ✅ FLEX WRAP ENABLED -->
    <div
      style="
        display:flex;
        flex-wrap:wrap;
        gap:40px 60px;
        align-items:flex-start;
      "
    >
      {% for category in menu_categories %}
      <div style="width:160px;">

        <!-- Parent Category -->
        <a
          href="{% url 'catalog:category_detail' category.slug %}"
          style="
            display:block;
            font-weight:600;
            margin-bottom:12px;
            color:#111827;
            text-decoration:none;
          "
        >
          {{ category.name }}
        </a>

        <!-- Sub Categories -->
        {% if category.children.all %}
        <ul style="list-style:none; padding:0; margin:0;">
          {% for sub in category.children.all %}
          <li style="margin-bottom:6px;">
            <a
              href="{% url 'catalog:category_detail' sub.slug %}"
              style="
                font-size:13px;
                color:#4b5563;
                text-decoration:none;
                display:block;
              "
            >
              {{ sub.name }}
            </a>
          </li>
          {% endfor %}
        </ul>
        {% endif %}

      </div>
      {% endfor %}
    </div>

  </div>
</nav>
